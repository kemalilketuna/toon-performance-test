<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1100 750">
  <defs>
    <!-- Gradients -->
    <linearGradient id="startGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#5a67d8;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="decisionGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f6f8fb;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#edf2f7;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="toonGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#48bb78;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#38a169;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="jsonGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ed8936;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#dd6b20;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="yamlGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#9f7aea;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#805ad5;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="csvGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4299e1;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#3182ce;stop-opacity:1" />
    </linearGradient>
    
    <!-- Shadow filter -->
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="4" stdDeviation="8" flood-color="#000" flood-opacity="0.1"/>
    </filter>
    <filter id="shadowSmall" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="2" stdDeviation="4" flood-color="#000" flood-opacity="0.08"/>
    </filter>
    
    <!-- Arrow markers -->
    <marker id="arrowYes" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto">
      <polygon points="0 0, 12 4, 0 8" fill="#38a169"/>
    </marker>
    <marker id="arrowNo" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto">
      <polygon points="0 0, 12 4, 0 8" fill="#e53e3e"/>
    </marker>
    <marker id="arrowNeutral" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto">
      <polygon points="0 0, 12 4, 0 8" fill="#718096"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="1100" height="750" fill="#f7fafc"/>
  
  <!-- Subtle grid pattern -->
  <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
    <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#e2e8f0" stroke-width="0.5"/>
  </pattern>
  <rect width="1100" height="750" fill="url(#grid)" opacity="0.5"/>
  
  <!-- Title -->
  <text x="550" y="45" font-family="Inter, -apple-system, BlinkMacSystemFont, sans-serif" font-size="24" font-weight="700" fill="#1a202c" text-anchor="middle">Format Selection Decision Tree</text>
  <text x="550" y="72" font-family="Inter, -apple-system, BlinkMacSystemFont, sans-serif" font-size="14" fill="#718096" text-anchor="middle">Choose the optimal serialization format for your LLM pipeline</text>
  
  <!-- ==================== START NODE ==================== -->
  <g filter="url(#shadow)" transform="translate(550, 140)">
    <rect x="-110" y="-40" width="220" height="80" rx="40" fill="url(#startGradient)"/>
    <text x="0" y="-5" font-family="Inter, -apple-system, sans-serif" font-size="14" font-weight="600" fill="white" text-anchor="middle">Is this data for</text>
    <text x="0" y="18" font-family="Inter, -apple-system, sans-serif" font-size="14" font-weight="600" fill="white" text-anchor="middle">LLM Input or Output?</text>
  </g>
  
  <!-- Arrow from START to Decision 1 (left - Input) -->
  <path d="M 470 140 Q 380 140 380 220" stroke="#718096" stroke-width="2.5" fill="none" marker-end="url(#arrowNeutral)"/>
  <rect x="355" y="165" width="50" height="22" rx="11" fill="#667eea"/>
  <text x="380" y="180" font-family="Inter, -apple-system, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">Input</text>
  
  <!-- Arrow from START to OUTPUT box (right - Output) -->
  <path d="M 630 140 Q 720 140 720 220" stroke="#718096" stroke-width="2.5" fill="none" marker-end="url(#arrowNeutral)"/>
  <rect x="695" y="165" width="60" height="22" rx="11" fill="#667eea"/>
  <text x="725" y="180" font-family="Inter, -apple-system, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">Output</text>
  
  <!-- ==================== JSON OUTPUT BOX ==================== -->
  <g filter="url(#shadow)" transform="translate(720, 280)">
    <rect x="-90" y="-45" width="180" height="90" rx="12" fill="url(#jsonGradient)"/>
    <text x="0" y="-10" font-family="Inter, -apple-system, sans-serif" font-size="18" font-weight="700" fill="white" text-anchor="middle">Use JSON</text>
    <text x="0" y="14" font-family="Inter, -apple-system, sans-serif" font-size="11" fill="rgba(255,255,255,0.9)" text-anchor="middle">Robust parsing libraries</text>
    <text x="0" y="30" font-family="Inter, -apple-system, sans-serif" font-size="11" fill="rgba(255,255,255,0.9)" text-anchor="middle">Better error recovery</text>
  </g>
  
  <!-- ==================== DECISION 1: Is data tabular? ==================== -->
  <g filter="url(#shadowSmall)" transform="translate(380, 290)">
    <polygon points="0,-60 100,0 0,60 -100,0" fill="url(#decisionGradient)" stroke="#cbd5e0" stroke-width="2"/>
    <text x="0" y="-12" font-family="Inter, -apple-system, sans-serif" font-size="13" font-weight="600" fill="#2d3748" text-anchor="middle">Is data</text>
    <text x="0" y="8" font-family="Inter, -apple-system, sans-serif" font-size="13" font-weight="600" fill="#2d3748" text-anchor="middle">tabular?</text>
    <text x="0" y="26" font-family="Inter, -apple-system, sans-serif" font-size="10" fill="#718096" text-anchor="middle">(uniform objects)</text>
  </g>
  
  <!-- Arrow from Decision 1 YES to Decision 2 -->
  <path d="M 380 350 L 380 400" stroke="#38a169" stroke-width="2.5" fill="none" marker-end="url(#arrowYes)"/>
  <rect x="390" y="365" width="40" height="20" rx="10" fill="#c6f6d5"/>
  <text x="410" y="379" font-family="Inter, -apple-system, sans-serif" font-size="11" font-weight="600" fill="#276749" text-anchor="middle">Yes</text>
  
  <!-- Arrow from Decision 1 NO to Decision 3 -->
  <path d="M 280 290 L 180 290" stroke="#e53e3e" stroke-width="2.5" fill="none" marker-end="url(#arrowNo)"/>
  <rect x="205" y="270" width="35" height="20" rx="10" fill="#fed7d7"/>
  <text x="222" y="284" font-family="Inter, -apple-system, sans-serif" font-size="11" font-weight="600" fill="#c53030" text-anchor="middle">No</text>
  
  <!-- ==================== DECISION 2: Uniform schema? ==================== -->
  <g filter="url(#shadowSmall)" transform="translate(380, 470)">
    <polygon points="0,-55 95,0 0,55 -95,0" fill="url(#decisionGradient)" stroke="#cbd5e0" stroke-width="2"/>
    <text x="0" y="-12" font-family="Inter, -apple-system, sans-serif" font-size="13" font-weight="600" fill="#2d3748" text-anchor="middle">Uniform</text>
    <text x="0" y="8" font-family="Inter, -apple-system, sans-serif" font-size="13" font-weight="600" fill="#2d3748" text-anchor="middle">schema?</text>
    <text x="0" y="26" font-family="Inter, -apple-system, sans-serif" font-size="10" fill="#718096" text-anchor="middle">(same fields)</text>
  </g>
  
  <!-- Arrow from Decision 2 YES to TOON box -->
  <path d="M 475 470 L 560 470" stroke="#38a169" stroke-width="2.5" fill="none" marker-end="url(#arrowYes)"/>
  <rect x="500" y="450" width="40" height="20" rx="10" fill="#c6f6d5"/>
  <text x="520" y="464" font-family="Inter, -apple-system, sans-serif" font-size="11" font-weight="600" fill="#276749" text-anchor="middle">Yes</text>
  
  <!-- Arrow from Decision 2 NO to CSV box -->
  <path d="M 380 525 L 380 580" stroke="#e53e3e" stroke-width="2.5" fill="none" marker-end="url(#arrowNo)"/>
  <rect x="390" y="540" width="35" height="20" rx="10" fill="#fed7d7"/>
  <text x="407" y="554" font-family="Inter, -apple-system, sans-serif" font-size="11" font-weight="600" fill="#c53030" text-anchor="middle">No</text>
  
  <!-- ==================== TOON BOX (Primary recommendation) ==================== -->
  <g filter="url(#shadow)" transform="translate(660, 470)">
    <rect x="-85" y="-55" width="170" height="110" rx="14" fill="url(#toonGradient)"/>
    <rect x="-85" y="-55" width="170" height="110" rx="14" fill="none" stroke="#276749" stroke-width="2"/>
    <text x="0" y="-20" font-family="Inter, -apple-system, sans-serif" font-size="20" font-weight="700" fill="white" text-anchor="middle">Use TOON</text>
    <text x="0" y="5" font-family="Inter, -apple-system, sans-serif" font-size="11" fill="rgba(255,255,255,0.9)" text-anchor="middle">40-47% token savings</text>
    <text x="0" y="22" font-family="Inter, -apple-system, sans-serif" font-size="11" fill="rgba(255,255,255,0.9)" text-anchor="middle">Best for lists &amp; catalogs</text>
    <!-- Star badge -->
    <circle cx="70" cy="-40" r="16" fill="#276749"/>
    <text x="70" y="-35" font-size="16" text-anchor="middle" fill="white">â˜…</text>
  </g>
  
  <!-- ==================== DECISION 3: Deeply nested? ==================== -->
  <g filter="url(#shadowSmall)" transform="translate(110, 290)">
    <polygon points="0,-55 90,0 0,55 -90,0" fill="url(#decisionGradient)" stroke="#cbd5e0" stroke-width="2"/>
    <text x="0" y="-12" font-family="Inter, -apple-system, sans-serif" font-size="13" font-weight="600" fill="#2d3748" text-anchor="middle">Deeply</text>
    <text x="0" y="8" font-family="Inter, -apple-system, sans-serif" font-size="13" font-weight="600" fill="#2d3748" text-anchor="middle">nested?</text>
    <text x="0" y="26" font-family="Inter, -apple-system, sans-serif" font-size="10" fill="#718096" text-anchor="middle">(4+ levels)</text>
  </g>
  
  <!-- Arrow from Decision 3 YES to YAML box -->
  <path d="M 110 345 L 110 400" stroke="#38a169" stroke-width="2.5" fill="none" marker-end="url(#arrowYes)"/>
  <rect x="120" y="360" width="40" height="20" rx="10" fill="#c6f6d5"/>
  <text x="140" y="374" font-family="Inter, -apple-system, sans-serif" font-size="11" font-weight="600" fill="#276749" text-anchor="middle">Yes</text>
  
  <!-- Arrow from Decision 3 NO to TOON (secondary) box -->
  <path d="M 110 235 L 110 180" stroke="#e53e3e" stroke-width="2.5" fill="none" marker-end="url(#arrowNo)"/>
  <rect x="120" y="195" width="35" height="20" rx="10" fill="#fed7d7"/>
  <text x="137" y="209" font-family="Inter, -apple-system, sans-serif" font-size="11" font-weight="600" fill="#c53030" text-anchor="middle">No</text>
  
  <!-- ==================== YAML BOX ==================== -->
  <g filter="url(#shadow)" transform="translate(110, 470)">
    <rect x="-80" y="-45" width="160" height="90" rx="12" fill="url(#yamlGradient)"/>
    <text x="0" y="-10" font-family="Inter, -apple-system, sans-serif" font-size="18" font-weight="700" fill="white" text-anchor="middle">Use YAML</text>
    <text x="0" y="14" font-family="Inter, -apple-system, sans-serif" font-size="11" fill="rgba(255,255,255,0.9)" text-anchor="middle">Clean hierarchy</text>
    <text x="0" y="30" font-family="Inter, -apple-system, sans-serif" font-size="11" fill="rgba(255,255,255,0.9)" text-anchor="middle">Best for configs</text>
  </g>
  
  <!-- ==================== TOON SECONDARY BOX ==================== -->
  <g filter="url(#shadow)" transform="translate(110, 120)">
    <rect x="-80" y="-40" width="160" height="80" rx="12" fill="url(#toonGradient)"/>
    <text x="0" y="-8" font-family="Inter, -apple-system, sans-serif" font-size="16" font-weight="700" fill="white" text-anchor="middle">Use TOON</text>
    <text x="0" y="14" font-family="Inter, -apple-system, sans-serif" font-size="10" fill="rgba(255,255,255,0.9)" text-anchor="middle">15-25% savings</text>
    <text x="0" y="28" font-family="Inter, -apple-system, sans-serif" font-size="10" fill="rgba(255,255,255,0.9)" text-anchor="middle">Single objects OK</text>
  </g>
  
  <!-- ==================== CSV BOX ==================== -->
  <g filter="url(#shadow)" transform="translate(380, 650)">
    <rect x="-80" y="-40" width="160" height="80" rx="12" fill="url(#csvGradient)"/>
    <text x="0" y="-8" font-family="Inter, -apple-system, sans-serif" font-size="18" font-weight="700" fill="white" text-anchor="middle">Use CSV</text>
    <text x="0" y="14" font-family="Inter, -apple-system, sans-serif" font-size="11" fill="rgba(255,255,255,0.9)" text-anchor="middle">Flat primitive arrays</text>
    <text x="0" y="30" font-family="Inter, -apple-system, sans-serif" font-size="11" fill="rgba(255,255,255,0.9)" text-anchor="middle">Numbers &amp; strings only</text>
  </g>
  
  <!-- ==================== LEGEND ==================== -->
  <g transform="translate(870, 600)">
    <rect x="0" y="0" width="200" height="130" rx="10" fill="white" stroke="#e2e8f0" stroke-width="1.5" filter="url(#shadowSmall)"/>
    <text x="100" y="25" font-family="Inter, -apple-system, sans-serif" font-size="12" font-weight="700" fill="#2d3748" text-anchor="middle">Legend</text>
    
    <!-- Start/End -->
    <rect x="15" y="40" width="30" height="16" rx="8" fill="url(#startGradient)"/>
    <text x="55" y="52" font-family="Inter, -apple-system, sans-serif" font-size="10" fill="#4a5568">Start / Question</text>
    
    <!-- Decision -->
    <polygon points="30,75 45,68 30,61 15,68" fill="url(#decisionGradient)" stroke="#cbd5e0" stroke-width="1"/>
    <text x="55" y="72" font-family="Inter, -apple-system, sans-serif" font-size="10" fill="#4a5568">Decision</text>
    
    <!-- Result -->
    <rect x="15" y="85" width="30" height="16" rx="4" fill="url(#toonGradient)"/>
    <text x="55" y="97" font-family="Inter, -apple-system, sans-serif" font-size="10" fill="#4a5568">Recommendation</text>
    
    <!-- Yes/No arrows -->
    <line x1="15" y1="115" x2="35" y2="115" stroke="#38a169" stroke-width="2"/>
    <text x="55" y="118" font-family="Inter, -apple-system, sans-serif" font-size="10" fill="#38a169" font-weight="600">Yes</text>
    <line x1="95" y1="115" x2="115" y2="115" stroke="#e53e3e" stroke-width="2"/>
    <text x="135" y="118" font-family="Inter, -apple-system, sans-serif" font-size="10" fill="#e53e3e" font-weight="600">No</text>
  </g>
  
  <!-- ==================== FOOTER NOTE ==================== -->
  <text x="550" y="730" font-family="Inter, -apple-system, sans-serif" font-size="11" fill="#a0aec0" text-anchor="middle" font-style="italic">Tip: When in doubt, use TOON for input and JSON for output</text>
  
</svg>
